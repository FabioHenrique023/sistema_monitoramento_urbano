@using sistema_monitoramento_urbano.Models.Repositorio.Entidades
@{
    var camera = ViewBag.Cameras as IEnumerable<Camera> ?? Enumerable.Empty<Camera>();
}
<form method="get" asp-controller="Monitoramento" asp-action="Index" class="mb-4 flex flex-col gap-3 md:flex-row md:items-end md:gap-4">
  <input type="hidden" name="tab" value="camera" />
  <div class="flex-1">
    <label class="block text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1">Buscar descrição</label>
    <input name="cameraBusca"
           value="@(ViewBag.CameraFiltro as string ?? string.Empty)"
           class="w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"
           placeholder="Ex.: Avenida Paulista" />
  </div>
  <div class="flex items-center gap-2">
    <button type="submit"
            class="px-4 py-2 rounded-lg bg-indigo-600 text-white text-sm font-semibold shadow hover:bg-indigo-700 transition">
      Filtrar
    </button>
    <a asp-controller="Monitoramento"
       asp-action="Index"
       asp-route-tab="camera"
       class="px-4 py-2 rounded-lg bg-gray-100 text-gray-700 text-sm font-semibold hover:bg-gray-200 transition">
      Limpar
    </a>
  </div>
</form>

<div class="bg-white rounded-xl shadow border border-gray-100">
  <table class="min-w-full text-sm">
    <thead class="bg-gray-50 text-gray-600">
      <tr>
        <th class="px-4 py-2 text-left">ID</th>
        <th class="px-4 py-2 text-left">Descrição</th>
        <th class="px-4 py-2 text-left">Lat</th>
        <th class="px-4 py-2 text-left">Lon</th>
        <th class="px-4 py-2 text-left">FPS</th>
        <th class="px-4 py-2"></th>
      </tr>
    </thead>
    <tbody>
    @if (!camera.Any())
    {
      <tr><td colspan="6" class="px-4 py-6 text-center text-gray-500">Nenhuma câmera adicionada.</td></tr>
    }
    else
    {
      foreach (var c in camera)
      {
        <tr class="border-t">
          <td class="px-4 py-2 font-medium text-gray-900">@c.Id</td>
          <td class="px-4 py-2">@c.Descricao</td>
          <td class="px-4 py-2">@c.Latitude</td>
          <td class="px-4 py-2">@c.Longitude</td>
          <td class="px-4 py-2">@c.Fps</td>
          <td class="px-4 py-2 text-right">
            <form asp-controller="Camera" asp-action="Excluir" method="post">
              <input type="hidden" name="id" value="@c.Id" />
              <button class="text-red-600 hover:underline">Excluir</button>
            </form>
          </td>
        </tr>
      }
    }
    </tbody>
  </table>
</div>