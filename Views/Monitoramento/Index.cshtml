@{
    ViewData["Title"] = "Cadastro de Câmeras e Vídeos";
}

<div class="mx-auto max-w-6xl p-6">
  <!-- CARD -->
  <div class="bg-white rounded-2xl border border-gray-100 shadow-xl shadow-black/5 overflow-hidden">
    
    <!-- Cabeçalho -->
    <div class="px-6 py-5 border-b border-gray-100">
      <h1 class="text-2xl font-extrabold tracking-tight">Cadastro de Câmeras e Vídeos</h1>
      <p class="text-sm text-slate-500 mt-1">Gerencie pontos de monitoramento e associe vídeos às câmeras.</p>
    </div>

    <!-- Tabs -->
    <div class="px-6 pt-4">
      <div class="inline-flex rounded-xl bg-slate-100 p-1" role="tablist" aria-label="Seções">
        <!-- Aba Câmeras -->
        <button
          type="button"
          class="tab-btn inline-flex items-center justify-center gap-2 rounded-lg px-4 py-2 text-sm font-semibold transition 
                 bg-white shadow ring-1 ring-slate-200 text-violet-700"
          data-target="#tab-camera"
          data-color="violet"
          role="tab" aria-selected="true" aria-controls="tab-camera" id="tabbtn-camera">
          Câmeras
        </button>

        <!-- Aba Vídeos -->
        <button
          type="button"
          class="tab-btn inline-flex items-center justify-center gap-2 rounded-lg px-4 py-2 text-sm font-semibold transition 
                 text-slate-600 hover:text-slate-900"
          data-target="#tab-video"
          data-color="emerald"
          role="tab" aria-selected="false" aria-controls="tab-video" id="tabbtn-video">
          Vídeos
        </button>
      </div>
    </div>

    <!-- Painéis -->
    <div class="px-6 pb-6">
      <section id="tab-camera" class="tab-panel mt-6 block" role="tabpanel" aria-labelledby="tabbtn-camera">
        @await Html.PartialAsync("~/Views/Monitoramento/Camera/_Tab.cshtml")
      </section>

      <section id="tab-video" class="tab-panel mt-6 hidden" role="tabpanel" aria-labelledby="tabbtn-video">
        @await Html.PartialAsync("~/Views/Monitoramento/Video/_Tab.cshtml")
      </section>
    </div>
  </div>
</div>

@section Scripts {
  <partial name="_ValidationScriptsPartial" />
  <script>
    const BASE_ACTIVE = ["bg-white","shadow","ring-1","ring-slate-200"];
    const INACTIVE = ["text-slate-600","hover:text-slate-900"];

    const COLORS = {
      violet: ["text-violet-700"],
      emerald: ["text-emerald-700"]
    };

    const setActiveTab = (btn) => {
      document.querySelectorAll('[role="tab"]').forEach(b => {
        b.classList.remove(...BASE_ACTIVE, ...COLORS.violet, ...COLORS.emerald);
        b.classList.add(...INACTIVE);
        b.setAttribute("aria-selected", "false");
      });

      const color = btn.dataset.color || "violet";
      btn.classList.remove(...INACTIVE);
      btn.classList.add(...BASE_ACTIVE, ...COLORS[color]);
      btn.setAttribute("aria-selected", "true");

      document.querySelectorAll('.tab-panel').forEach(p => p.classList.add('hidden'));
      const target = document.querySelector(btn.dataset.target);
      if (target) target.classList.remove('hidden');
    };

    document.querySelectorAll('[role="tab"]').forEach(b => {
      b.addEventListener('click', () => setActiveTab(b));
    });
  </script>
}